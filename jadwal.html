<!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
<!------ Include the above in your HEAD tag ---------->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Schedule</title>
    <link rel="stylesheet" href="sidebar.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">


</head>

<body>
    <div class="d-flex" id="wrapper">
        <div class="bg-light border-right" id="sidebar-wrapper">
            <div class="sidebar-heading">Home Automation</div>
            <div class="list-group list-group-flush">
                <a class="list-group-item list-group-item-action bg-light text-center" href="/menu_button">
                    Menu
                </a>
                <a class="list-group-item list-group-item-action bg-light fas fa-user" href="/user_button">
                    Add User
                </a>
                <a class="list-group-item list-group-item-action bg-light fas fa-home" href="/rumah_button">
                    Home Automation
                </a>
                
                <a class="list-group-item list-group-item-action bg-light fas fa-envelope" href="/kontak_button">
                    Our Contact
                </a>
                <div class="container pt-5">
                    <img src="pi.png" alt="logo" width="200" height="150">
                </div>
            </div>
        </div>
        <!-- Sidebar -->

        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <a id="menu-toggle" class="btn btn-sm btn-light" href="#">
                    <i class="fas fa-bars"></i>
                </a>
                <!-- <button class="btn btn-primary" id="menu-toggle">Toggle Menu</button> -->

                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                      <!-- <li class="nav-item active">
                        <a class="nav-link" href="dashboard.html">Home <span class="sr-only">(current)</span></a>
                      </li> -->
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="login.png" alt="logo" width="25" height="25">
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                          <a class="dropdown-item" href="/keluar_button">Sign Out</a>
                          <a class="dropdown-item" href="/reset">Reset Password</a>
                        </div>
                      </li>
                    </ul>
                </div>
            </nav>

            <!-- sideavr -->
            <main>
                <div class="container-fluid">
                    <div
                        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Jadwal</h1>
                    </div>
                    <table class="table table-hover link-primary">
                        <tr>
                            <th align="center">No.</th>
                            <th align="center">Unit</th>
                            <th align="center">ON</th>
                            <th align="center">OFF</th>
                        </tr>

                        <tr>
                            <td id="nomor">1</td>
                            <td id="unit">Ruang 1</td>
                            <td id="onr1" align="center"></td>
                            <td id="offr1" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch1" %T1%>
                                    <label class="custom-control-label" for="switch1"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">2</td>
                            <td id="unit">Ruang 2</td>
                            <td id="onr2" align="center"></td>
                            <td id="offr2" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch2" %T2%>
                                    <label class="custom-control-label" for="switch2"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">3</td>
                            <td id="unit">Ruang 3</td>
                            <td id="onr3" align="center"></td>
                            <td id="offr3" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch3" %T3%> 
                                    <label class="custom-control-label" for="switch3"></label>
                                </div>                            
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">4</td>
                            <td id="unit">Ruang 4</td>
                            <td id="onr4" align="center"></td>
                            <td id="offr4" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch4" %T4%>
                                    <label class="custom-control-label" for="switch4"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">5</td>
                            <td id="unit">Ruang 5</td>
                            <td id="onr5" align="center"></td>
                            <td id="offr5" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch5" %T5%>
                                    <label class="custom-control-label" for="switch5"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">6</td>
                            <td id="unit">Ruang 6</td>
                            <td id="onr6" align="center"></td>
                            <td id="offr6" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch6" %T6%>
                                    <label class="custom-control-label" for="switch6"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">7</td>
                            <td id="unit">Ruang 7</td>
                            <td id="onr7" align="center"></td>
                            <td id="offr7" align="center"></td>
                            <td align="center">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch7" %T7%>
                                    <label class="custom-control-label" for="switch7"></label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td id="nomor">8</td>
                            <td id="unit">Ruang 8</td>
                            <td id="onr8" align="center"></td>
                            <td id="offr8" align="center"></td>
                            <td align="center">
                                <!-- Material checked -->
                                <!-- Default switch -->
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" onchange="check()" id="switch8" %T8%>
                                    <label class="custom-control-label" for="switch8"></label>
                                </div>
                            </td>		
                        </tr>
                        

                    </table>
                </div>
                <footer class="text-center">Copyright &copy; 2021 PT. Ruang Cipta Teknologi</footer>
            </main>
            
        </div>
        <!-- page-wrapper -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
        <script>
            var obj;
            var gwUrl = "ws://" + location.host + "/ws";
            var webSocket = new WebSocket(gwUrl);
            var waktuOn1;
            var waktuOff1;
            var waktuOn2;
            var waktuOff2;
            var waktuOn3;
            var waktuOff3;
            var waktuOn4;
            var waktuOff4;
            var waktuOn5;
            var waktuOff5;
            var waktuOn6;
            var waktuOff6;
            var waktuOn7;
            var waktuOff7;
            var waktuOn8;
            var waktuOff8;
            // var T1;
            // var T2;
            // var T3;
            // var T4;
            // var T5;
            // var T6;
            // var T7;
            // var T8;
            var button_1_status = 0;
            var button_2_status = 0;
            var button_3_status = 0;
            var button_4_status = 0;
            var button_5_status = 0;
            var button_6_status = 0;
            var button_7_status = 0;
            var button_8_status = 0;

            function check() {
            val1 = document.getElementById("switch1").checked;
            if (val1)
                button_1_status = 1;
            else
                button_1_status = 0;            

            val2 = document.getElementById("switch2").checked;
            if (val2)
                button_2_status = 1;
            else
                button_2_status = 0;            

            val3 = document.getElementById("switch3").checked;
            if (val3)
                button_3_status = 1;
            else
                button_3_status = 0;           

            val4 = document.getElementById("switch4").checked;
            if (val4)
                button_4_status = 1;
            else
                button_4_status = 0;            

            val5 = document.getElementById("switch5").checked;
            if (val5)
                button_5_status = 1;
            else
                button_5_status = 0;            

            val6 = document.getElementById("switch6").checked;
            if (val6)
                button_6_status = 1;
            else
                button_6_status = 0;            

            val7 = document.getElementById("switch7").checked;
            if (val7)
                button_7_status = 1;
            else
                button_7_status = 0;            

            val8 = document.getElementById("switch8").checked;
            if (val8)
                button_8_status = 1;
            else
                button_8_status = 0;
            sendStatus()
            }

            function sendStatus() {
                var full_data = '{"al1" :'+button_1_status+',"al2":'+button_2_status+',"al3":'+button_3_status+',"al4":'+button_4_status+',"al5":'+button_5_status+',"al6":'+button_6_status+',"al7":'+button_7_status+',"al8":'+button_8_status+'}';
                webSocket.send(full_data);
            }

            webSocket.onopen = function(event) {
                console.log("open");
            }
            
            webSocket.onclose = function(event) {
                console.log("close");
            }

            webSocket.onmessage = function (event) {
                // document.getElementById("rxConsole").value += event.data;
                obj = JSON.parse(event.data);
    
                var full_data1 = event.data;
                console.log(full_data1);
                var data = JSON.parse(full_data1);

                waktuOn1 = data.jamon1+':'+data.meniton1;
                waktuOff1 = data.jamoff1+':'+data.menitoff1;
                waktuOn2 = data.jamon2+':'+data.meniton2;
                waktuOff2 = data.jamoff2+':'+data.menitoff2;
                waktuOn3 = data.jamon3+':'+data.meniton3;
                waktuOff3 = data.jamoff3+':'+data.menitoff3;
                waktuOn4 = data.jamon4+':'+data.meniton4;
                waktuOff4 = data.jamoff4+':'+data.menitoff4;
                waktuOn5 = data.jamon5+':'+data.meniton5;
                waktuOff5 = data.jamoff5+':'+data.menitoff5;
                waktuOn6 = data.jamon6+':'+data.meniton6;
                waktuOff6 = data.jamoff6+':'+data.menitoff6;
                waktuOn7 = data.jamon7+':'+data.meniton7;
                waktuOff7 = data.jamoff7+':'+data.menitoff7;
                waktuOn8 = data.jamon8+':'+data.meniton8;
                waktuOff8 = data.jamoff8+':'+data.menitoff8;

                // T1 = data.t1;
                // T2 = data.t2;
                // T3 = data.t3;
                // T4 = data.t4;
                // T5 = data.t5;
                // T6 = data.t6;
                // T7 = data.t7;
                // T8 = data.t8;

                // if (T1 == '1')
                //     document.getElementById("switch1").checked = true;
                // else
                //     document.getElementById("switch1").checked = false;
                // if (T2 == '1')
                //     document.getElementById("switch2").checked = true;
                // else
                //     document.getElementById("switch2").checked = false;
                // if (T3 == '1')
                //     document.getElementById("switch3").checked = true;
                // else
                //     document.getElementById("switch3").checked = false;
                // if (T4 == '1')
                //     document.getElementById("switch4").checked = true;
                // else
                //     document.getElementById("switch4").checked = false;
                // if (T5 == '1')
                //     document.getElementById("switch5").checked = true;
                // else
                //     document.getElementById("switch5").checked = false;
                // if (T6 == '1')
                //     document.getElementById("switch6").checked = true;
                // else
                //     document.getElementById("switch6").checked = false;
                // if (T7 == '1')
                //     document.getElementById("switch7").checked = true;
                // else
                //     document.getElementById("switch7").checked = false;
                // if (T8 == '1')
                //     document.getElementById("switch8").checked = true;
                // else
                //     document.getElementById("switch8").checked = false;

                // waktuOn = data.waktuon;
                // waktuOff = data.waktuoff;
                
                document.getElementById("onr1").innerHTML = waktuOn1;
                document.getElementById("offr1").innerHTML = waktuOff1;
                document.getElementById("onr2").innerHTML = waktuOn2;
                document.getElementById("offr2").innerHTML = waktuOff2;
                document.getElementById("onr3").innerHTML = waktuOn3;
                document.getElementById("offr3").innerHTML = waktuOff3;
                document.getElementById("onr4").innerHTML = waktuOn4;
                document.getElementById("offr4").innerHTML = waktuOff4;
                document.getElementById("onr5").innerHTML = waktuOn5;
                document.getElementById("offr5").innerHTML = waktuOff5;
                document.getElementById("onr6").innerHTML = waktuOn6;
                document.getElementById("offr6").innerHTML = waktuOff6;
                document.getElementById("onr7").innerHTML = waktuOn7;
                document.getElementById("offr7").innerHTML = waktuOff7;
                document.getElementById("onr8").innerHTML = waktuOn8;
                document.getElementById("offr8").innerHTML = waktuOff8;
            }

            $("#menu-toggle").click(function (event) {
                event.preventDefault();
                $("#wrapper").toggleClass("toggled");
            });
        </script>
</body>

</html>